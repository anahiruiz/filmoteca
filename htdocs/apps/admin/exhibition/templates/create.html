<h1 ng-hide="exhibition.id" class="text-center">Agregar exhibición</h1>
<h1 ng-show="exhibition.id" class="text-center">Editar exhibición</h1>

<div class="row">
    <div class="col-sm-12">
        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-2 control-label" for="film">
                    Película
                </label>
                <div class="col-sm-10">
                    <angucomplete-alt
                            id="ex1"
                            placeholder="Buscar película por título"
                            pause="400"
                            selected-object="filmSelected"
                            remote-url="/api/film?by=title&value="
                            remote-url-data-field=""
                            title-field="title"
                            description-field="director"
                            search-fields="title"
                            image-field="cover_urls.thumbnail"
                            minlength="1"
                            text-searching="Buscando..."
                            text-no-results="Ninguna película encontrada."
                            input-class="form-control form-control-small">
                    </angucomplete-alt>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-10 col-sm-offset-2">
                    <div data-ng-show="film" class="panel panel-default ng-cloak">
                        <div class="panel-heading">{{film.title}}</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-sm-4">
                                    <img ng-src="{{ film.cover_urls.thumbnail }}" class="thumbnail img-responsive">
                                </div>
                                <div class="col-sm-8">
                                    <p><strong>Título</strong>: {{film.title}}</p>
                                    <p data-ng-show="film.countries"><strong>País</strong>: {{film.countries | map: 'name' | join: ', '}}</p>
                                    <p data-ng-show="film.years"><strong>Años</strong>: {{ film.years | join: ', '}}</p>
                                    <p data-ng-show="film.synopsis"><strong>Años</strong>: {{ film.synopsis}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="icon">Icono</label>
                <div class="col-sm-6">
                    <select data-ng-options="icon.name for icon in icons" ng-model="exhibition.icon" class="form-control">
                        <option value="">Ninguno</option>
                    </select>
                </div>
                <div class="col-sm-3">
                    <div class="thumbnail" data-ng-show="exhibition.icon">
                        <img data-ng-src="{{ exhibition.icon.icon }}" alt="{{ icon.name }}" title="{{ icon.name }}"/>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="notes">Notas</label>
                <div class="col-sm-10">
                    <textarea ng-model="exhibition.notes" class="col-sm-10 form-control"></textarea>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div data-schedules="exhibition.schedules"></div>
    </div>
</div>

<div class="row">
    <button class="btn btn-success" data-ng-disabled="!exhibition.exhibition_film.film" data-ng-click="store()">
        Guardar y regresar al listado
    </button>
    <span class="loading loading-sm" data-ng-show="saving"></span>
</div>
